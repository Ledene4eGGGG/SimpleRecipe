Index: MyFirstApplication/app/src/main/res/layout/fragment_home.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.coordinatorlayout.widget.CoordinatorLayout\r\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\">\r\n\r\n    <com.google.android.material.appbar.AppBarLayout\r\n        android:id=\"@+id/app_bar\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:background=\"@android:color/transparent\">\r\n\r\n        <com.google.android.material.appbar.CollapsingToolbarLayout\r\n            android:id=\"@+id/toolbar_layout\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            app:layout_scrollFlags=\"scroll|exitUntilCollapsed\">\r\n\r\n            <androidx.appcompat.widget.SearchView\r\n                android:id=\"@+id/search_view\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginTop=\"8dp\"\r\n                android:background=\"@drawable/comer_background\"\r\n                app:layout_collapseMode=\"pin\" />\r\n\r\n        </com.google.android.material.appbar.CollapsingToolbarLayout>\r\n\r\n    </com.google.android.material.appbar.AppBarLayout>\r\n\r\n    <androidx.swiperefreshlayout.widget.SwipeRefreshLayout\r\n        android:id=\"@+id/pull_to_refresh\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        app:layout_behavior=\"@string/appbar_scrolling_view_behavior\">\r\n\r\n        <androidx.recyclerview.widget.RecyclerView\r\n            android:id=\"@+id/main_recycler\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n            tools:listitem=\"@layout/film_item\"\r\n            android:layout_margin=\"8dp\" />\r\n\r\n    </androidx.swiperefreshlayout.widget.SwipeRefreshLayout>\r\n\r\n    <ProgressBar\r\n        android:id=\"@+id/progress_bar\"\r\n        android:layout_width=\"100dp\"\r\n        android:layout_height=\"100dp\"\r\n        android:visibility=\"visible\"\r\n        android:layout_gravity=\"center\" />\r\n\r\n</androidx.coordinatorlayout.widget.CoordinatorLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/MyFirstApplication/app/src/main/res/layout/fragment_home.xml b/MyFirstApplication/app/src/main/res/layout/fragment_home.xml
--- a/MyFirstApplication/app/src/main/res/layout/fragment_home.xml	
+++ b/MyFirstApplication/app/src/main/res/layout/fragment_home.xml	
@@ -23,8 +23,7 @@
                 android:layout_width="match_parent"
                 android:layout_height="wrap_content"
                 android:layout_marginTop="8dp"
-                android:background="@drawable/comer_background"
-                app:layout_collapseMode="pin" />
+                android:background="#8F96B8"/>
 
         </com.google.android.material.appbar.CollapsingToolbarLayout>
 
Index: MyFirstApplication/.idea/gradle.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"GradleMigrationSettings\" migrationVersion=\"1\" />\r\n  <component name=\"GradleSettings\">\r\n    <option name=\"linkedExternalProjectsSettings\">\r\n      <GradleProjectSettings>\r\n        <option name=\"testRunner\" value=\"GRADLE\" />\r\n        <option name=\"distributionType\" value=\"DEFAULT_WRAPPED\" />\r\n        <option name=\"externalProjectPath\" value=\"$PROJECT_DIR$\" />\r\n        <option name=\"modules\">\r\n          <set>\r\n            <option value=\"$PROJECT_DIR$\" />\r\n            <option value=\"$PROJECT_DIR$/app\" />\r\n          </set>\r\n        </option>\r\n      </GradleProjectSettings>\r\n    </option>\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/MyFirstApplication/.idea/gradle.xml b/MyFirstApplication/.idea/gradle.xml
--- a/MyFirstApplication/.idea/gradle.xml	
+++ b/MyFirstApplication/.idea/gradle.xml	
@@ -4,15 +4,15 @@
   <component name="GradleSettings">
     <option name="linkedExternalProjectsSettings">
       <GradleProjectSettings>
-        <option name="testRunner" value="GRADLE" />
-        <option name="distributionType" value="DEFAULT_WRAPPED" />
         <option name="externalProjectPath" value="$PROJECT_DIR$" />
+        <option name="gradleJvm" value="#GRADLE_LOCAL_JAVA_HOME" />
         <option name="modules">
           <set>
             <option value="$PROJECT_DIR$" />
             <option value="$PROJECT_DIR$/app" />
           </set>
         </option>
+        <option name="resolveExternalAnnotations" value="false" />
       </GradleProjectSettings>
     </option>
   </component>
Index: MyFirstApplication/.idea/deploymentTargetDropDown.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"deploymentTargetDropDown\">\r\n    <targetsSelectedWithDialog>\r\n      <Target>\r\n        <type value=\"QUICK_BOOT_TARGET\" />\r\n        <deviceKey>\r\n          <Key>\r\n            <type value=\"VIRTUAL_DEVICE_PATH\" />\r\n            <value value=\"d:\\AndroidAvdHome\\Pixel_3a_API_33_x86_64.avd\" />\r\n          </Key>\r\n        </deviceKey>\r\n      </Target>\r\n    </targetsSelectedWithDialog>\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/MyFirstApplication/.idea/deploymentTargetDropDown.xml b/MyFirstApplication/.idea/deploymentTargetDropDown.xml
--- a/MyFirstApplication/.idea/deploymentTargetDropDown.xml	
+++ b/MyFirstApplication/.idea/deploymentTargetDropDown.xml	
@@ -1,16 +1,10 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <project version="4">
   <component name="deploymentTargetDropDown">
-    <targetsSelectedWithDialog>
-      <Target>
-        <type value="QUICK_BOOT_TARGET" />
-        <deviceKey>
-          <Key>
-            <type value="VIRTUAL_DEVICE_PATH" />
-            <value value="d:\AndroidAvdHome\Pixel_3a_API_33_x86_64.avd" />
-          </Key>
-        </deviceKey>
-      </Target>
-    </targetsSelectedWithDialog>
+    <value>
+      <entry key="app">
+        <State />
+      </entry>
+    </value>
   </component>
 </project>
\ No newline at end of file
Index: MyFirstApplication/.idea/misc.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><project version=\"4\">\r\n  <component name=\"ExternalStorageConfigurationManager\" enabled=\"true\" />\r\n  <component name=\"ProjectRootManager\" version=\"2\" languageLevel=\"JDK_17\" project-jdk-name=\"jbr-17\" project-jdk-type=\"JavaSDK\">\r\n    <output url=\"file://$PROJECT_DIR$/build/classes\" />\r\n  </component>\r\n  <component name=\"ProjectType\">\r\n    <option name=\"id\" value=\"Android\" />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/MyFirstApplication/.idea/misc.xml b/MyFirstApplication/.idea/misc.xml
--- a/MyFirstApplication/.idea/misc.xml	
+++ b/MyFirstApplication/.idea/misc.xml	
@@ -1,6 +1,6 @@
 <project version="4">
   <component name="ExternalStorageConfigurationManager" enabled="true" />
-  <component name="ProjectRootManager" version="2" languageLevel="JDK_17" project-jdk-name="jbr-17" project-jdk-type="JavaSDK">
+  <component name="ProjectRootManager" version="2" languageLevel="JDK_17" default="true" project-jdk-name="jbr-17" project-jdk-type="JavaSDK">
     <output url="file://$PROJECT_DIR$/build/classes" />
   </component>
   <component name="ProjectType">
Index: MyFirstApplication/app/src/main/java/com/example/myapplication2/view/fragment/HomeFragment.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.myapplication2.view.fragment\r\n\r\nimport android.os.Bundle\r\nimport android.view.LayoutInflater\r\nimport android.view.View\r\nimport android.view.ViewGroup\r\nimport android.widget.Toast\r\nimport androidx.appcompat.widget.SearchView\r\nimport androidx.core.view.isVisible\r\nimport androidx.fragment.app.Fragment\r\nimport androidx.lifecycle.Observer\r\nimport androidx.lifecycle.ViewModelProvider\r\nimport androidx.recyclerview.widget.LinearLayoutManager\r\nimport com.example.myapplication2.utils.AnimationHelper\r\nimport com.example.myapplication2.FilmListRecyclerAdapter\r\nimport com.example.myapplication2.MainActivity\r\nimport com.example.myapplication2.OnItemClickListener\r\nimport com.example.myapplication2.data.entity.Film\r\nimport com.example.myapplication2.view.rv.adapters.TopSpacingItemDecoration\r\nimport com.example.myapplication2.databinding.FragmentHomeBinding\r\nimport com.example.myapplication2.utils.AutoDisposable\r\nimport com.example.myapplication2.utils.addTo\r\nimport com.example.myapplication2.viewmodel.HomeFragmentViewModel\r\nimport io.reactivex.rxjava3.android.schedulers.AndroidSchedulers\r\nimport io.reactivex.rxjava3.core.Observable\r\nimport io.reactivex.rxjava3.core.ObservableOnSubscribe\r\nimport io.reactivex.rxjava3.kotlin.subscribeBy\r\nimport io.reactivex.rxjava3.schedulers.Schedulers\r\nimport kotlinx.coroutines.CoroutineScope\r\nimport kotlinx.coroutines.Dispatchers\r\nimport kotlinx.coroutines.cancel\r\nimport kotlinx.coroutines.launch\r\nimport kotlinx.coroutines.withContext\r\nimport java.util.Locale\r\nimport java.util.concurrent.TimeUnit\r\n\r\nclass HomeFragment : Fragment() {\r\n\r\n    private lateinit var binding: FragmentHomeBinding\r\n\r\n    private val viewModel by lazy {\r\n        ViewModelProvider.NewInstanceFactory().create(\r\n            HomeFragmentViewModel::class.java\r\n        )\r\n    }\r\n    private lateinit var filmsAdapter: FilmListRecyclerAdapter\r\n\r\n    private val itemClickListener = object : OnItemClickListener {\r\n        override fun click(film: Film) {\r\n            (requireActivity() as MainActivity).launchDetailsFragment(film)\r\n        }\r\n    }\r\n\r\n    private val autoDisposable = AutoDisposable()\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        autoDisposable.bindTo(lifecycle)\r\n    }\r\n\r\n   override fun onCreateView(\r\n        inflater: LayoutInflater, container: ViewGroup?,\r\n        savedInstanceState: Bundle?\r\n   ): View {\r\n       binding = FragmentHomeBinding.inflate(\r\n           inflater, container,  false\r\n       )\r\n       return binding.root\r\n   }\r\n\r\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\r\n        super.onViewCreated(view, savedInstanceState)\r\n\r\n        filmsAdapter = FilmListRecyclerAdapter(itemClickListener)\r\n\r\n\r\n        viewModel.filmsListData\r\n            .subscribeOn(Schedulers.io())\r\n            .observeOn(AndroidSchedulers.mainThread())\r\n            .subscribe { list ->\r\n                filmsAdapter.addItems(list)\r\n            }\r\n            .addTo(autoDisposable)\r\n\r\n        viewModel.showProgressBar\r\n            .subscribeOn(Schedulers.io())\r\n            .observeOn(AndroidSchedulers.mainThread())\r\n            .subscribe {\r\n                binding.progressBar.isVisible = it\r\n            }\r\n            .addTo(autoDisposable)\r\n    }\r\n\r\n    override fun onStop() {\r\n        super.onStop()\r\n\r\n        fun initPullToRefresh() {\r\n            binding.pullToRefresh.setOnRefreshListener {\r\n                filmsAdapter.items.clear()\r\n                viewModel.getFilms()\r\n                binding.pullToRefresh.isRefreshing = false\r\n            }\r\n        }\r\n        initPullToRefresh()\r\n\r\n        initRecycler()\r\n        Observable.create(ObservableOnSubscribe<String> { subscriber ->\r\n            //Вешаем слушатель на клавиатуру\r\n            binding.searchView.setOnQueryTextListener(object :\r\n            //Вызывается на ввод символов\r\n                SearchView.OnQueryTextListener {\r\n                override fun onQueryTextChange(newText: String): Boolean {\r\n                    filmsAdapter.items.clear()\r\n                    subscriber.onNext(newText)\r\n                    return false\r\n                }\r\n                //Вызывается по нажатию кнопки \"Поиск\"\r\n                override fun onQueryTextSubmit(query: String): Boolean {\r\n                    subscriber.onNext(query)\r\n                    return false\r\n                }\r\n            })\r\n        })\r\n            .subscribeOn(Schedulers.io())\r\n            .map {\r\n                it.toLowerCase(Locale.getDefault()).trim()\r\n            }\r\n            .debounce(800, TimeUnit.MILLISECONDS)\r\n            .filter {\r\n                //Если в поиске пустое поле, возвращаем список фильмов по умолчанию\r\n                viewModel.getFilms()\r\n                it.isNotBlank()\r\n            }\r\n            .flatMap {\r\n                viewModel.getSearchResult(it)\r\n            }\r\n            .subscribeOn(Schedulers.io())\r\n            .observeOn(AndroidSchedulers.mainThread())\r\n            .subscribeBy(\r\n                onError = {\r\n                    Toast.makeText(requireContext(), \"Что-то пошло не так\", Toast.LENGTH_SHORT).show()\r\n                },\r\n                onNext = {\r\n                    filmsAdapter.addItems(it)\r\n                }\r\n            )\r\n            .addTo(autoDisposable)\r\n    }\r\n    private fun initRecycler() {\r\n        binding.mainRecycler.apply {\r\n            adapter = filmsAdapter\r\n            layoutManager = LinearLayoutManager(requireActivity())\r\n            val decorator = TopSpacingItemDecoration(8)\r\n            addItemDecoration(decorator)\r\n        }\r\n    }\r\n    }\r\n\r\n\r\n\r\n\r\n
===================================================================
diff --git a/MyFirstApplication/app/src/main/java/com/example/myapplication2/view/fragment/HomeFragment.kt b/MyFirstApplication/app/src/main/java/com/example/myapplication2/view/fragment/HomeFragment.kt
--- a/MyFirstApplication/app/src/main/java/com/example/myapplication2/view/fragment/HomeFragment.kt	
+++ b/MyFirstApplication/app/src/main/java/com/example/myapplication2/view/fragment/HomeFragment.kt	
@@ -104,6 +104,7 @@
         initPullToRefresh()
 
         initRecycler()
+
         Observable.create(ObservableOnSubscribe<String> { subscriber ->
             //Вешаем слушатель на клавиатуру
             binding.searchView.setOnQueryTextListener(object :
